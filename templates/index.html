<!doctype html>

<html>

  <head>
    <title>Lobby Panel</title>

    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.2.1.min.js"
            integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
            crossorigin="anonymous"></script>

    <link rel="stylesheet" href="{{ url_for('static', filename='lobby_panel.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='station_board/station_board.css') }}">

    <script src="{{ url_for('static', filename='station_board/station_board.js') }}" type="text/javascript"></script>

    <script type="text/javascript">

      var widgit = [];

      widgit.push(new StationBoard('station_board_1',{'station': 'CBG', 'offset': 0}));
      widgit.push(new StationBoard('station_board_2',{'station': 'CBG', 'offset': 30}));
      widgit.push(new StationBoard('station_board_3',{'station': 'CMB', 'offset': 0}));
      widgit.push(new StationBoard('station_board_4',{'station': 'PAD', 'offset': 0}));

      function reload_widgits () {
        for (var i = 0; i < widgit.length; i++) {
          if ('reload' in widgit[i]) {
            console.log("Reloading ", widgit[i].container);
            widgit[i].reload();
          }
          else {
            console.log("Not reloading ", widgit[i].container);
          }
        }
      }

      function page_load() {
        for (var i = 0; i < widgit.length; i++) {
          if ('init' in widgit[i]) {
            console.log("Initing ", widgit[i].container);
            widgit[i].init();
          }
          else {
            console.log("Not initing ", widgit[i].container);
          }
        }
        setInterval(function() {
          console.log("Running page-level reloader");
          reload_widgits();
        }, 60000)
      }

    </script>

  </head>

  <body onLoad="page_load()">

    <div class="wrapper">
      <div class="container_1_2 col_1 row_1" id="station_board_1"></div>
      <div class="container_1_2 col_2 row_1" id="station_board_2"></div>
      <div class="container_1_2 col_1 row_3" id="station_board_3"></div>
      <div class="container_1_2 col_2 row_3" id="station_board_4"></div>

      <div class="credits">
        <a href="https://www.greatercambridge.org.uk/"><img alt="Greater Cambridge Partnership" src="{{ url_for('static', filename='logo_gccd_112.png') }}"></a>
        <a href="http://www.connectingcambridgeshire.co.uk/smartcamb/"><img alt="Connecting Cambridgshire" src="{{ url_for('static', filename='logo_sc_112.png') }}" ></a>
        <a href="http://www.cam.ac.uk"><img alt="The University of Cambridge" src="{{ url_for('static', filename='logo_uc_112.png') }}"></a>
        <span>Adaptive Cities Platform</span>
      </div>

    </div>

  </body>

</html>